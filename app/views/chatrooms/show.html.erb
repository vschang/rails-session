<div class="posts-wrapper">
  <div class="posts-container">
    <h1 class="mb-3">Chat with @<%= @chatroom.interlocutor_of(current_user).username %></h1>
    <div class="container chatroom"
    data-controller="chatroom-subscription"
    data-chatroom-subscription-chatroom-id-value="<%= @chatroom.id %>"
    data-chatroom-subscription-user-id-value="<%= current_user.id %>">

      <div class="messages" data-chatroom-subscription-target="messages">
        <% @chatroom.messages.each do |message| %>
          <%# <div class="message-row d-flex = message.sender?(current_user) ? 'justify-content-end' : 'justify-content-start'"> %>
            <%# <div class = "= message.sender?(current_user) ? 'sender-style' : 'receiver-style'" > %>
              <%= render "messages/message", message: message %>
          <%# </div> %>
        <%# </div> %>
      <% end %>
      </div>

      <%= simple_form_for [@chatroom, @message],
          remote: true,
          html: {
            data: { action: "ajax:complete->chatroom-subscription#resetForm" },
            class: "d-flex input-group"
            } do |f| %>
          <%= f.input :content,
              as: :string,
              label: false,
              placeholder: "message #{@chatroom.name}",
              wrapper_html: {class: "form-outline flex-grow-1"},
              input_html: { class: 'form-control' }
          %>
          <%= f.submit "send", class: "btn btn-primary mb-3" %>
      <% end %>

    </div>
    <%= link_to "back", :back, class:"back-btn" %>

  </div>
</div>
